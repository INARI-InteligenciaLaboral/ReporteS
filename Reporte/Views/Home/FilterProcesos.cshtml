@using Mvc.CascadeDropDown
@model Reporte.Models.CascadingDropdownsModel
@{
    ViewBag.Title = "FilterProcesos";
}
<section class="contenedor">
    <div class="formulario">
        @using (Html.BeginForm("GenerarDocumentPro", "Home", FormMethod.Post))
            {
            <div>
                <table class="tablas">
                    <tr>
                        <th>
                            <label>Empresa</label>
                            @Html.DropDownListFor(m => m.SelectedEmpresas, Model.Empresas, "Seleccione la empresa", new { @class = "form-control combobox" , Required = true })
                        </th>
                        <th>
                            <label>Proceso</label>
                            @Html.CascadingDropDownListFor(expression: m => m.SelectedProcesos,
                                  triggeredByProperty: m => m.SelectedEmpresas,
                                  url: Url.Action("GetProcesos", "Home"),
                                  ajaxActionParamName: "empresas",
                                  optionLabel: "Selececiona el proceso",
                                  disabledWhenParrentNotSelected: true,
                                  htmlAttributes: new { @class = "form-control combobox", Required = true })
                        </th>
                    </tr>
                    <tr>
                        <th colspan="2">
                            <label>Periodo(s)</label>
                            @Html.EditorFor(model => model.SelectedMeses, new { htmlAttributes = new { @class = "form-control cajas", placeholder = "ejemplo: 2015001 o 2015001-2015015", Required = true } })
                        </th>
                    </tr>
                </table>
            </div>
            
            <div class="boton">
                <input onclick="JavascriptFunction();" type="submit" class="boton" value="Generar" />
            </div>
        <div id="divLoading" style="margin: 0px; padding: 0px; position: fixed; right: 0px;
                top: 0px; width: 100%; height: 100%; background-color: #666666; z-index: 30001;
                opacity: .8; filter: alpha(opacity=70);display:none">
            <p style="position: absolute; top: 30%; left: 45%; color: White;">
                Loading, please wait...<img src="E:/ajax-loading.gif">
            </p>
        </div>
            <script type="text/javascript" language="javascript">
                function JavascriptFunction() {
                    $("#divLoading").show();
                    $.post(url, null,
                            function (data) {
                                $("#PID")[0].innerHTML = data;
                                $("#divLoading").hide();
                            });
                }
            </script>
    }
    </div>
</section>